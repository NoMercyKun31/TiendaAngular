<!DOCTYPE html>
<html>
<head>
</head>
<body>
<div class="registro-container">
  <div class="registro-box">
    <h2 class="registro-title">Registro</h2>
    <form #registroForm="ngForm" (ngSubmit)="register(registroForm)">
      <div class="form-group">
        <input 
          id="username" 
          [(ngModel)]="user.username" 
          name="username" 
          #username="ngModel"
          required 
          minlength="4"
          maxlength="20"
          pattern="^[a-zA-Z0-9_]+$"
          placeholder=" "
        />
        <i class="fas fa-user"></i>
        <label for="username">Nombre de Usuario</label>
        <div *ngIf="username.invalid && (username.dirty || username.touched)" class="error-message">
          <small *ngIf="username.errors?.['required']">El nombre de usuario es obligatorio.</small>
          <small *ngIf="username.errors?.['minlength']">Debe tener al menos 4 caracteres.</small>
          <small *ngIf="username.errors?.['maxlength']">No puede exceder 20 caracteres.</small>
          <small *ngIf="username.errors?.['pattern']">Solo letras, números y guiones bajos.</small>
        </div>
      </div>
      <div class="form-group">
        <input 
          id="email" 
          [(ngModel)]="user.email" 
          name="email" 
          #email="ngModel"
          type="email" 
          required 
          email
          placeholder=" "
        />
        <i class="fas fa-envelope"></i>
        <label for="email">Correo Electrónico</label>
        <div *ngIf="email.invalid && (email.dirty || email.touched)" class="error-message">
          <small *ngIf="email.errors?.['required']">El correo electrónico es obligatorio.</small>
          <small *ngIf="email.errors?.['email']">Introduce un correo electrónico válido.</small>
        </div>
      </div>
      <div class="form-group">
        <input 
          id="password" 
          [(ngModel)]="user.password" 
          name="password" 
          #password="ngModel"
          type="password" 
          required 
          minlength="8"
          pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$"
          placeholder=" "
        />
        <i class="fas fa-lock"></i>
        <label for="password">Contraseña</label>
        <div *ngIf="password.invalid && (password.dirty || password.touched)" class="error-message">
          <small *ngIf="password.errors?.['required']">La contraseña es obligatoria.</small>
          <small *ngIf="password.errors?.['minlength']">Debe tener al menos 8 caracteres.</small>
          <small *ngIf="password.errors?.['pattern']">Debe contener letras y números.</small>
        </div>
      </div>
      <button 
        type="submit" 
        class="registro-btn" 
        [disabled]="!registroForm.form.valid"
      >
        <i class="fas fa-sign-in-alt"></i>
        Registrarse
      </button>
    </form>
  </div>
</div>
</body>
</html>